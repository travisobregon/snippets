sudo: required
language: php
dist: trusty

php:
  - 7.1

services:
  - mysql

before_install:
  - mysql -e 'CREATE DATABASE snippets_testing;'

install:
  - travis_retry composer install --no-interaction --prefer-dist --no-suggest

before_script:
  # Create a new .env file
  - cp .env.testing .env
  # Generate application key
  - php artisan key:generate
  # Start PhantomJS driver
  #- phantomjs --webdriver=127.0.0.1:9515 &
  # Start server
  #- php artisan serve &
  # Give PhantomJS and Artisan time to start
  #- sleep 5

script:
  - vendor/bin/phpunit
  #- php artisan dusk

notifications:
  slack: itt-devops:3h9i2RuAo1VWBTj9oCi5DWEQ
